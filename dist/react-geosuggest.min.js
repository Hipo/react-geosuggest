!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Geosuggest=e()}}(function(){var e;return function t(e,s,n){function u(i,r){if(!s[i]){if(!e[i]){var a="function"==typeof require&&require;if(!r&&a)return a(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=s[i]={exports:{}};e[i][0].call(c.exports,function(t){var s=e[i][1][t];return u(s?s:t)},c,c.exports,t,e,s,n)}return s[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)u(n[i]);return u}({1:[function(t,s){!function(){"use strict";function t(){for(var e=[],s=0;s<arguments.length;s++){var u=arguments[s];if(u){var o=typeof u;if("string"===o||"number"===o)e.push(u);else if(Array.isArray(u))e.push(t.apply(null,u));else if("object"===o)for(var i in u)n.call(u,i)&&u[i]&&e.push(i)}}return e.join(" ")}var n={}.hasOwnProperty;"undefined"!=typeof s&&s.exports?s.exports=t:"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return t}):window.classNames=t}()},{}],2:[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Object.defineProperty(s,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},l=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),c=window.React,p=n(c),f=e("classnames"),g=n(f),d=e("./defaults"),h=n(d),y=e("./prop-types"),v=n(y),m=e("./filter-input-attributes"),S=n(m),b=e("./input"),w=n(b),P=e("./suggest-list"),_=n(P),O=function(e){function t(e){u(this,t);var s=o(this,Object.getPrototypeOf(t).call(this,e));return s.state={isSuggestsHidden:!0,userInput:e.initialValue,activeSuggest:null,suggests:[],timer:null},s}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initialValue!==e.initialValue&&this.setState({userInput:e.initialValue})}},{key:"componentWillMount",value:function(){var e=this.props.googleMaps||window.google&&window.google.maps||this.googleMaps;e&&(this.googleMaps=e,this.autocompleteService=new e.places.AutocompleteService,this.geocoder=new e.Geocoder)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.timer)}},{key:"onInputChange",value:function(e){var t=this;this.setState({userInput:e},function(){t.showSuggests(),t.props.onChange(e)})}},{key:"onInputFocus",value:function(){this.props.onFocus(),this.showSuggests()}},{key:"onInputBlur",value:function(){this.state.ignoreBlur||this.hideSuggests()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"update",value:function(e){this.setState({userInput:e}),this.props.onChange(e)}},{key:"clear",value:function(){var e=this;this.setState({userInput:""},function(){return e.hideSuggests()})}},{key:"searchSuggests",value:function(){var e=this;if(!this.state.userInput)return void this.updateSuggests();var t=this.state.userInput,s=this.props.searchSuffix;s&&(t+=" "+s);var n={input:t};["location","radius","bounds","types"].forEach(function(t){e.props[t]&&(n[t]=e.props[t])}),this.props.country&&(n.componentRestrictions={country:this.props.country}),this.autocompleteService.getPlacePredictions(n,function(t){e.updateSuggests(t||[]),e.props.autoActivateFirstSuggest&&e.activateSuggest("next")})}},{key:"updateSuggests",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],s=[],n=new RegExp(r(this.state.userInput),"gim"),u=this.props.skipSuggest,o=10,i=0;this.props.fixtures.forEach(function(e){i>=o||!u(e)&&e.label.match(n)&&(i++,e.placeId=e.label,e.isFixture=!0,s.push(e))}),t.forEach(function(t){u(t)||s.push({label:e.props.getSuggestLabel(t),placeId:t.place_id,isFixture:!1})}),this.setState({suggests:s})}},{key:"showSuggests",value:function(){this.searchSuggests(),this.setState({isSuggestsHidden:!1})}},{key:"hideSuggests",value:function(){var e=this;this.props.onBlur(this.state.userInput);var t=setTimeout(function(){e.setState({isSuggestsHidden:!0})},100);this.setState({timer:t})}},{key:"activateSuggest",value:function(e){if(this.state.isSuggestsHidden)return void this.showSuggests();var t=this.state.suggests.length-1,s="next"===e,n=null,u=0,o=0;for(o;t>=o;o++)this.state.suggests[o]===this.state.activeSuggest&&(u=s?o+1:o-1);this.state.activeSuggest||(u=s?0:t),u>=0&&t>=u&&(n=this.state.suggests[u]),this.props.onActivateSuggest(n),this.setState({activeSuggest:n})}},{key:"selectSuggest",value:function(e){return e||(e={label:this.state.userInput}),this.setState({isSuggestsHidden:!0,userInput:e.label}),e.location?(this.setState({ignoreBlur:!1}),void this.props.onSuggestSelect(e)):void this.geocodeSuggest(e)}},{key:"geocodeSuggest",value:function(e){var t=this;this.geocoder.geocode(e.placeId&&!e.isFixture?{placeId:e.placeId}:{address:e.label},function(s,n){if(n===t.googleMaps.GeocoderStatus.OK){var u=s[0],o=u.geometry.location;e.gmaps=u,e.location={lat:o.lat(),lng:o.lng()},t.props.onSuggestSelect(e)}})}},{key:"render",value:function(){var e=this,t=S["default"](this.props),s=g["default"]("geosuggest",this.props.className),n=p["default"].createElement(w["default"],a({className:this.props.inputClassName,ref:"input",value:this.state.userInput,onChange:this.onInputChange.bind(this),onFocus:this.onInputFocus.bind(this),onBlur:this.onInputBlur.bind(this),style:this.props.style.input,onNext:function(){return e.activateSuggest("next")},onPrev:function(){return e.activateSuggest("prev")},onSelect:function(){return e.selectSuggest(e.state.activeSuggest)},onEscape:this.hideSuggests.bind(this)},t)),u=p["default"].createElement(_["default"],{isHidden:this.state.isSuggestsHidden,style:this.props.style.suggests,suggestItemStyle:this.props.style.suggestItem,suggests:this.state.suggests,activeSuggest:this.state.activeSuggest,onSuggestMouseDown:function(){return e.setState({ignoreBlur:!0})},onSuggestMouseOut:function(){return e.setState({ignoreBlur:!1})},onSuggestSelect:this.selectSuggest.bind(this)},this.props.children);return p["default"].createElement("div",{className:s},p["default"].createElement("div",{className:"geosuggest__input-wrapper"},n),p["default"].createElement("div",{className:"geosuggest__suggests-wrapper"},u))}}]),t}(p["default"].Component);O.propTypes=v["default"],O.defaultProps=h["default"],s["default"]=O},{"./defaults":3,"./filter-input-attributes":4,"./input":5,"./prop-types":6,"./suggest-list":8,classnames:1}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s["default"]={fixtures:[],initialValue:"",placeholder:"Search places",disabled:!1,className:"",inputClassName:"",location:null,radius:null,bounds:null,country:null,types:null,googleMaps:null,onActivateSuggest:function(){},onSuggestSelect:function(){},onFocus:function(){},onBlur:function(){},onChange:function(){},skipSuggest:function(){},getSuggestLabel:function(e){return e.description},autoActivateFirstSuggest:!1,style:{input:{},suggests:{},suggestItem:{}}}},{}],4:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s["default"]=function(e){var t={};return n.forEach(function(s){e[s]&&(t[s]=e[s])}),t};var n=["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","height","id","inputMode","maxLength","name","pattern","placeholder","readOnly","required","size","spellCheck","tabIndex"]},{}],5:[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(s,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},a=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),l=window.React,c=n(l),p=e("classnames"),f=n(p),g=e("./filter-input-attributes"),d=n(g),h=function(e){function t(){return u(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),a(t,[{key:"onChange",value:function(){this.props.onChange(this.refs.input.value)}},{key:"onInputKeyDown",value:function(e){switch(e.which){case 40:e.preventDefault(),this.props.onNext();break;case 38:e.preventDefault(),this.props.onPrev();break;case 13:e.preventDefault(),this.props.onSelect();break;case 9:this.props.onSelect();break;case 27:this.props.onEscape()}}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"render",value:function(){var e=d["default"](this.props),t=f["default"]("geosuggest__input",this.props.className);return c["default"].createElement("input",r({className:t,ref:"input",type:"text",autoComplete:"off"},e,{value:this.props.value,style:this.props.style,onKeyDown:this.onInputKeyDown.bind(this),onChange:this.onChange.bind(this),onFocus:this.props.onFocus.bind(this),onBlur:this.props.onBlur.bind(this)}))}}]),t}(c["default"].Component);h.defaultProps={className:"",value:"",onChange:function(){},onFocus:function(){},onBlur:function(){},onNext:function(){},onPrev:function(){},onSelect:function(){},onEscape:function(){}},s["default"]=h},{"./filter-input-attributes":4,classnames:1}],6:[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(s,"__esModule",{value:!0});var u=window.React,o=n(u);s["default"]={fixtures:o["default"].PropTypes.array,initialValue:o["default"].PropTypes.string,placeholder:o["default"].PropTypes.string,disabled:o["default"].PropTypes.bool,className:o["default"].PropTypes.string,inputClassName:o["default"].PropTypes.string,location:o["default"].PropTypes.object,radius:o["default"].PropTypes.oneOfType([o["default"].PropTypes.string,o["default"].PropTypes.number]),bounds:o["default"].PropTypes.object,country:o["default"].PropTypes.string,types:o["default"].PropTypes.array,googleMaps:o["default"].PropTypes.object,onSuggestSelect:o["default"].PropTypes.func,onFocus:o["default"].PropTypes.func,onBlur:o["default"].PropTypes.func,onChange:o["default"].PropTypes.func,skipSuggest:o["default"].PropTypes.func,getSuggestLabel:o["default"].PropTypes.func,autoActivateFirstSuggest:o["default"].PropTypes.bool,style:o["default"].PropTypes.shape({input:o["default"].PropTypes.object,suggests:o["default"].PropTypes.object,suggestItem:o["default"].PropTypes.object}),searchSuffix:o["default"].PropTypes.string}},{}],7:[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(s,"__esModule",{value:!0});var u=window.React,o=n(u),i=e("classnames"),r=n(i);s["default"]=function(e){var t=e.isActive,s=void 0===t?!1:t,n=e.className,u=void 0===n?"":n,i=e.suggest,a=void 0===i?{}:i,l=e.onMouseDown,c=void 0===l?function(){}:l,p=e.onMouseOut,f=void 0===p?function(){}:p,g=e.onSelect,d=void 0===g?function(){}:g,h=e.style,y=void 0===h?{}:h,v=r["default"]("geosuggest-item",u,{"geosuggest-item--active":s});return o["default"].createElement("li",{className:v,style:y,onMouseDown:c,onMouseOut:f,onClick:function(e){e.preventDefault(),d()}},a.label)}},{classnames:1}],8:[function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(s,"__esModule",{value:!0});var u=window.React,o=n(u),i=e("classnames"),r=n(i),a=e("./suggest-item"),l=n(a);s["default"]=function(e){var t=e.isHidden,s=void 0===t?!0:t,n=e.suggests,u=void 0===n?[]:n,i=e.activeSuggest,a=e.onSuggestMouseDown,c=void 0===a?function(){}:a,p=e.onSuggestMouseOut,f=void 0===p?function(){}:p,g=e.onSuggestSelect,d=void 0===g?function(){}:g,h=e.style,y=void 0===h?{}:h,v=e.suggestItemStyle,m=void 0===v?{}:v,S=e.children,b=void 0===S?null:S,w=r["default"]("geosuggest__suggests",{"geosuggest__suggests--hidden":s});return o["default"].createElement("ul",{className:w,style:y},u.map(function(e){var t=i&&e.placeId===i.placeId;return o["default"].createElement(l["default"],{key:e.placeId,className:e.className,suggest:e,style:m,isActive:t,onMouseDown:c,onMouseOut:f,onSelect:function(){return d(e)}})}),b)}},{"./suggest-item":7,classnames:1}]},{},[2])(2)});